<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>cloffeine.common documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Cloffeine</span> <span class="project-version">0.1.5</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cloffeine</span></div></div></li><li class="depth-2 branch"><a href="cloffeine.async-cache.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>async-cache</span></div></a></li><li class="depth-2 branch"><a href="cloffeine.async-loading-cache.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>async-loading-cache</span></div></a></li><li class="depth-2 branch"><a href="cloffeine.cache.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cache</span></div></a></li><li class="depth-2 branch current"><a href="cloffeine.common.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-2"><a href="cloffeine.loading-cache.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>loading-cache</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="cloffeine.common.html#var-cache-stats-.3Emap"><div class="inner"><span>cache-stats-&gt;map</span></div></a></li><li class="depth-1"><a href="cloffeine.common.html#var-ifn-.3Ebifunction"><div class="inner"><span>ifn-&gt;bifunction</span></div></a></li><li class="depth-1"><a href="cloffeine.common.html#var-ifn-.3Efunction"><div class="inner"><span>ifn-&gt;function</span></div></a></li><li class="depth-1"><a href="cloffeine.common.html#var-make-builder"><div class="inner"><span>make-builder</span></div></a></li><li class="depth-1"><a href="cloffeine.common.html#var-reify-async-cache-loader"><div class="inner"><span>reify-async-cache-loader</span></div></a></li><li class="depth-1"><a href="cloffeine.common.html#var-reify-cache-loader"><div class="inner"><span>reify-cache-loader</span></div></a></li><li class="depth-1"><a href="cloffeine.common.html#var-reify-cache-writer"><div class="inner"><span>reify-cache-writer</span></div></a></li><li class="depth-1"><a href="cloffeine.common.html#var-reify-weigher"><div class="inner"><span>reify-weigher</span></div></a></li><li class="depth-1"><a href="cloffeine.common.html#var-stats"><div class="inner"><span>stats</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">cloffeine.common</h1><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-cache-stats-.3Emap"><h3>cache-stats-&gt;map</h3><div class="usage"><code>(cache-stats-&gt;map cs)</code></div><div class="doc"><div class="markdown"><p>Convert CacheStats object readonly attributes to a clojure map see: <a href="https://www.javadoc.io/static/com.github.ben-manes.caffeine/caffeine/2.8.0/com/github/benmanes/caffeine/cache/stats/CacheStats.html">https://www.javadoc.io/static/com.github.ben-manes.caffeine/caffeine/2.8.0/com/github/benmanes/caffeine/cache/stats/CacheStats.html</a> for actual metrics docs.</p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/cloffeine/blob/0.1.5/src/cloffeine/common.clj#L127">view source</a></div></div><div class="public anchor" id="var-ifn-.3Ebifunction"><h3>ifn-&gt;bifunction</h3><div class="usage"><code>(ifn-&gt;bifunction ifn)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/cloffeine/blob/0.1.5/src/cloffeine/common.clj#L122">view source</a></div></div><div class="public anchor" id="var-ifn-.3Efunction"><h3>ifn-&gt;function</h3><div class="usage"><code>(ifn-&gt;function ifn)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/cloffeine/blob/0.1.5/src/cloffeine/common.clj#L117">view source</a></div></div><div class="public anchor" id="var-make-builder"><h3>make-builder</h3><div class="usage"><code>(make-builder settings)</code></div><div class="doc"><div class="markdown"><p>A builder for the various types of Caffeine’s caches (AsyncCache, AsyncLoadingCache, Cache, LoadingCache). The corresponding <code>create</code> functions, accept and pass here this config to create the required cache. <code>settings</code> is a map with the keys (all optional):</p>
<ul>
  <li><code>:recordStats</code> <code>boolean</code></li>
  <li><code>:statsCounterSupplier</code> a <code>com.github.benmanes.caffeine.cache.stats.StatsCounter</code>, mutually exclusive with <code>:recordStats</code></li>
  <li><code>:maximumSize</code> <code>long</code> Specifies the maximum number of entries the cache may contain.</li>
  <li><code>:expireAfter</code> <code>com.github.benmanes.caffeine.cache.Expiry</code></li>
  <li><code>:expireAfterAccess</code> <code>long</code>, references :timeUnit. Specifies that each entry should be automatically removed from the cache once a fixed duration has elapsed after the entry’s creation, the most recent replacement of its value, or its last read.</li>
  <li><code>:expireAfterWrite</code> <code>long</code>, references :timeUnit. Specifies that active entries are eligible for automatic refresh once a fixed duration has elapsed after the entry’s creation, or the most recent replacement of its value.</li>
  <li><code>:executor</code> <code>java.util.concurrent.Executor</code> Specifies the executor to use when running asynchronous tasks.</li>
  <li><code>:weakKeys</code> <code>boolean</code>. Specifies that each key (not value) stored in the cache should be wrapped in a WeakReference (by default, strong references are used).</li>
  <li><code>:initialCapacity</code> ‘long’. Sets the minimum total size for the internal data structures.</li>
  <li><code>:softValues</code> <code>Boolean</code> Specifies that each value (not key) stored in the cache should be wrapped in a SoftReference (by default, strong references are used). Softly-referenced objects will be garbage-collected in a globally least-recently-used manner, in response to memory demand.</li>
  <li><code>:ticker</code> <code>com.github.benmanes.caffeine.cache.Ticker</code> Specifies a nanosecond-precision time source for use in determining when entries should be expired or refreshed. By default, System.nanoTime() is used.</li>
  <li><code>:removalListener</code> <code>com.github.benmanes.caffeine.cache.RemovalListener</code> Specifies a listener instance that caches should notify each time an entry is removed for any reason. Each cache created by this builder will invoke this listener as part of the routine maintenance described in the class documentation above.</li>
  <li><code>:weigher</code> <code>com.github.benmanes.caffeine.cache.Weigher</code> Specifies the weigher to use in determining the weight of entries.</li>
  <li><code>:writer</code> <code>com.github.benmanes.caffeine.cache.CacheWriter</code> Specifies a writer instance that caches should notify each time an entry is explicitly created or modified, or removed for any reason.</li>
  <li><code>:timeUnit</code> <code>[:ms :us :s :m :h :d]</code> default is <code>:s</code></li>
</ul></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/cloffeine/blob/0.1.5/src/cloffeine/common.clj#L18">view source</a></div></div><div class="public anchor" id="var-reify-async-cache-loader"><h3>reify-async-cache-loader</h3><div class="usage"><code>(reify-async-cache-loader loading-fn)</code><code>(reify-async-cache-loader loading-fn reloading-fn)</code></div><div class="doc"><div class="markdown"><p>A helper for implemeting an <code>AsyncCacheLoader</code>.</p>
<ul>
  <li><code>loading-fn</code> <code>(fn [this k executor])</code>. Asynchronously computes or retrieves the value corresponding to key.</li>
  <li><code>reloading-fn</code> (optional) <code>(fn [this k old-val executor])</code> Asynchronously computes or retrieves a replacement value corresponding to an already-cached key. If the replacement value is not found then the mapping will be removed if null is computed. This method is called when an existing cache entry is refreshed by Caffeine.refreshAfterWrite(java.time.Duration), or through a call to LoadingCache.refresh(K).</li>
</ul></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/cloffeine/blob/0.1.5/src/cloffeine/common.clj#L62">view source</a></div></div><div class="public anchor" id="var-reify-cache-loader"><h3>reify-cache-loader</h3><div class="usage"><code>(reify-cache-loader loading-fn)</code><code>(reify-cache-loader loading-fn reloading-fn)</code></div><div class="doc"><div class="markdown"><p>A helper for implemeting <code>CacheLoader</code></p>
<ul>
  <li><code>loading-fn</code>(fn [this k])` Computes or retrieves the value corresponding to key.</li>
  <li><code>relaoding-fn</code> `(fn [this k old-val]) Computes or retrieves a replacement value corresponding to an already-cached key.</li>
</ul></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/cloffeine/blob/0.1.5/src/cloffeine/common.clj#L79">view source</a></div></div><div class="public anchor" id="var-reify-cache-writer"><h3>reify-cache-writer</h3><div class="usage"><code>(reify-cache-writer delete-handler write-handler)</code></div><div class="doc"><div class="markdown"><p>A helper for implementing<code>CacheWriter</code></p>
<ul>
  <li><code>delete-handler</code> <code>(fn [this k v removal-cause])</code> Deletes the value corresponding to the key from the external resource.</li>
  <li><code>write-handler</code> <code>(fn [this k v])</code> Writes the value corresponding to the key to the external resource.</li>
</ul></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/cloffeine/blob/0.1.5/src/cloffeine/common.clj#L95">view source</a></div></div><div class="public anchor" id="var-reify-weigher"><h3>reify-weigher</h3><div class="usage"><code>(reify-weigher weigh-fn)</code></div><div class="doc"><div class="markdown"><p>A helper for implemeting <code>Weigher</code></p>
<p><code>weigh-fn</code> <code>(fn [this k v])</code> Returns the weight of a cache entry (int). There is no unit for entry weights; rather they are simply relative to each other.</p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/cloffeine/blob/0.1.5/src/cloffeine/common.clj#L107">view source</a></div></div><div class="public anchor" id="var-stats"><h3>stats</h3><div class="usage"><code>(stats c)</code></div><div class="doc"><div class="markdown"><p>Returns a current snapshot of this cache’s cumulative statistics.</p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/cloffeine/blob/0.1.5/src/cloffeine/common.clj#L146">view source</a></div></div></div></body></html>